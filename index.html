<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <link rel="stylesheet" href="style.css">
</head>

<body>
  <div id="question-container">
    <div class="form-style">
      <h3>Diagnosis for Generalized Anxiety Disorder</h3>
      <form id="quiz-form" action="#">
        <fieldset>
          <!--QUESTION one !-->
          <div class=radio>
            <p>1) Are you worried all the time over little things? At least since last 6 months?</p>
            <ul class="radio">
              <div class="fieldgroup">
                <input type="radio" name="q1" value=1 id="q1a" class="radio-label"><label for="q1a">Yes</label><br />
              </div>
              <div class="fieldgroup">
                <input type="radio" name="q1" value=0 id="q1b" class="radio-label"><label for="q1b">No</label><br />
              </div>
            </ul>
          </div>
          <!--QUESTION two !-->
          <div class=radio>
            <p>4) Do you find it difficult to control your worries, at least since last 6 months? </p>
            <ul class="radio">
              <div class="fieldgroup">
                <input type="radio" name="q2" value=1 id="q2a" class="radio-label" required><label
                  for="q2a">Yes</label><br />
              </div>
              <div class="fieldgroup">
                <input type="radio" name="q2" value=0 id="q2b" class="radio-label" required><label for="q2b"
                  required>No</label><br />
              </div>
            </ul>
          </div>

          <div class="que">
            <p>3) Choose below – At least since last 6 months</p>
          </div>


          <!--QUESTION three !-->
          <div class=radio>
            <p>A) Restlessness </p>
            <ul class="radio">
              <div class="fieldgroup">
                <input type="radio" name="q3a" value=1 id="q3a" class="radio-label"><label for="q3a">Yes</label><br />
              </div>
              <div class="fieldgroup">
                <input type="radio" name="q3a" value=0 id="q3b" class="radio-label"><label for="q3b">No</label><br />
              </div>
            </ul>
          </div>


          <!--QUESTION four !-->
          <div class=radio>
            <p>B) Easily fatigued and tired </p>
            <ul class="radio">
              <div class="fieldgroup">
                <input type="radio" name="q3b" value=1 id="q4a" class="radio-label"><label for="q4a">Yes</label><br />
              </div>
              <div class="fieldgroup">
                <input type="radio" name="q3b" value=0 id="q4b" class="radio-label"><label for="q4b">No</label><br />
              </div>
            </ul>
          </div>

          <!--QUESTION five !-->
          <div class=radio>
            <p>C) Mind goes blank and difficulty in concentration? </p>
            <ul class="radio">
              <div class="fieldgroup">
                <input type="radio" name="q3c" value=1 id="q5a" class="radio-label"><label for="q5a">Yes</label><br />
              </div>
              <div class="fieldgroup">
                <input type="radio" name="q3c" value=0 id="q5b" class="radio-label"><label for="q5b">No</label><br />
              </div>
            </ul>
          </div>

          <!--QUESTION six !-->
          <div class=radio>
            <p>D) Muscle tension? </p>
            <ul class="radio">
              <div class="fieldgroup">
                <input type="radio" name="q3d" value=1 id="q6a" class="radio-label"><label for="q6a">Yes</label><br />
              </div>
              <div class="fieldgroup">
                <input type="radio" name="q3d" value=0 id="q6b" class="radio-label"><label for="q6b">No</label><br />
              </div>

            </ul>
          </div>



          <!--QUESTION seven !-->
          <div class=radio>
            <p>E) Sleep disturbance? </p>
            <ul class="radio">
              <div class="fieldgroup">
                <input type="radio" name="q3e" value=1 id="q7a" class="radio-label"><label for="q7a">Yes</label><br />
              </div>
              <div class="fieldgroup">
                <input type="radio" name="q3e" value=0 id="q7b" class="radio-label"><label for="q7b">No</label><br />
              </div>
            </ul>
          </div>
          <!--QUESTION eight !-->
          <div class=radio>
            <p>4)Are you an alcohol addict? 0/1 (If yes then Diagnosis is NOT GAD)</p>
            <ul class="radio">

              <div class="fieldgroup">
                <input type="radio" name="q4" value=1 id="q8a" class="radio-label"><label for="q8a">Yes</label><br />
              </div>
              <div class="fieldgroup">
                <input type="radio" name="q4" value=0 id="q8b" class="radio-label"><label for="q8b">No</label><br />
              </div>
            </ul>
          </div>
          <!--QUESTION nine !-->
          <div class=radio>
            <p>5) Are you a patient of hyperthyroidism? – 0/1 (If answer is yes, again diagnosis is NOT GAD)</p>
            <ul class="radio">
              <div class="fieldgroup">
                <input type="radio" name="q5" value=1 id="q9a" class="radio-label"><label for="q9a">Nes</label><br />
              </div>
              <div class="fieldgroup">
                <input type="radio" name="q5" value=0 id="q9b" class="radio-label"><label for="q9b">No</label><br />
              </div>
            </ul>
          </div>

          <button type="submit" id="btnSubmit">Submit</button>

          <p id="result"></p>

          <a href="">
            <p id="answers"></p>
          </a>

      </form>

    </div>
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        document.getElementById('quiz-form')
          .addEventListener('submit', handleForm);
      });
      function handleForm(ev) {
        ev.preventDefault();
        let myform = ev.target;
        let fd = new FormData(myform);
        var object1 = {};
        for (let key of fd.keys()) {
          object1[key] = fd.get(key);
        }
        var data = JSON.stringify(object1);

        let url = 'https://gadbackend20220216222747.azurewebsites.net/api/v1/gad';
        let req = new Request(url, {
          body: data,
          method: 'POST',
        });
        req.headers.set('Content-Type', 'application/json');


        var client = new HttpClient();
        client.post(url, data, function (response) {
          // do something with response
          const data = JSON.parse(response);
          if (data.Ans == 'Yes') {
            document.getElementById("result").innerHTML = "You are diagnosed with GAD";
            document.getElementById("answers").innerHTML = "Book Slot";
          }
          else
            document.getElementById("result").innerHTML = "Congratulation, You are not diagnosed with GAD";

          //Print book slot


        });

        // .then((res) => res.json())
        // .then((data) => {
        //   console.log(data);

        // })
        // .catch(console.warn);

      }

      var HttpClient = function () {
        this.post = function (aUrl, body, aCallback) {

          var anHttpRequest = new XMLHttpRequest();
          anHttpRequest.onreadystatechange = function () {
            if (anHttpRequest.readyState == 4 && anHttpRequest.status == 200)
              aCallback(anHttpRequest.responseText);
          }
          anHttpRequest.open("POST", aUrl, true);
          anHttpRequest.setRequestHeader("Content-Type", "application/json");

          anHttpRequest.send(body);
        }
      }
    </script>
  </div>



  <script src="script.js"></script>
</body>

</html>